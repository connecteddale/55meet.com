---
phase: 28-polish-integration
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - the55/app/templates/base.html
  - the55/app/static/css/main.css
  - the55/app/templates/admin/dashboard.html
  - the55/app/templates/admin/sessions/view.html
  - the55/app/templates/login.html
autonomous: true

must_haves:
  truths:
    - "Users can skip to main content with keyboard navigation"
    - "Focus states are visible for keyboard users but not for mouse users"
    - "Status indicators communicate state without relying on color alone"
    - "All form inputs have associated visible labels"
  artifacts:
    - path: "the55/app/templates/base.html"
      provides: "Skip link, main content id"
      contains: "skip-link"
    - path: "the55/app/static/css/main.css"
      provides: "Focus-visible styles, skip link styles"
      contains: "focus-visible"
  key_links:
    - from: "the55/app/templates/base.html"
      to: "#main-content"
      via: "skip link anchor"
      pattern: "href=\"#main-content\""
---

<objective>
Add WCAG 2.1 AA accessibility improvements to base templates and CSS.

Purpose: Ensure keyboard-only users and screen reader users can navigate the application effectively. These are HIGH priority accessibility gaps identified in the research audit.

Output: Updated base.html with skip link, enhanced focus-visible CSS, color-independent status badges with icons.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/28-polish-integration/28-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add Skip Link and Focus-Visible Styles</name>
  <files>the55/app/templates/base.html, the55/app/static/css/main.css</files>
  <action>
  1. Update base.html:
     - Add skip link immediately after opening body tag: `<a href="#main-content" class="skip-link">Skip to main content</a>`
     - Add id="main-content" to the main element

  2. Add skip link CSS to main.css:
     ```css
     /* Skip link for keyboard navigation - WCAG 2.4.1 */
     .skip-link {
         position: absolute;
         top: -40px;
         left: 0;
         background: var(--color-primary);
         color: white;
         padding: var(--space-2) var(--space-4);
         z-index: 1000;
         transition: top 0.3s;
         text-decoration: none;
     }

     .skip-link:focus {
         top: 0;
     }
     ```

  3. Add focus-visible styles to main.css (after existing focus styles):
     ```css
     /* Focus-visible for keyboard accessibility - WCAG 2.4.7 */
     :focus-visible {
         outline: 2px solid var(--color-primary);
         outline-offset: 2px;
     }

     /* Remove focus outline for mouse users */
     :focus:not(:focus-visible) {
         outline: none;
     }

     /* Keep existing form focus ring which uses box-shadow */
     input:focus-visible,
     textarea:focus-visible,
     select:focus-visible {
         outline: none;
         border-color: var(--color-primary);
         box-shadow: 0 0 0 3px var(--color-primary-light);
     }
     ```
  </action>
  <verify>
  - Load any page and press Tab - skip link should appear at top
  - Press Enter on skip link - focus should move to main content
  - Tab through interactive elements - focus ring visible
  - Click with mouse - no focus ring on click
  </verify>
  <done>Skip link appears on Tab, focus-visible works for keyboard but not mouse clicks</done>
</task>

<task type="auto">
  <name>Task 2: Add Status Badge Icons for Color Independence</name>
  <files>the55/app/static/css/main.css, the55/app/templates/admin/dashboard.html, the55/app/templates/admin/sessions/view.html</files>
  <action>
  1. Add CSS for status icons to main.css:
     ```css
     /* Status badges with icons for color independence - WCAG 1.4.1 */
     .session-state::before {
         content: '';
         display: inline-block;
         width: 8px;
         height: 8px;
         border-radius: 50%;
         margin-right: var(--space-1);
         vertical-align: middle;
     }

     .state-draft::before { background-color: var(--color-text-tertiary); }
     .state-capturing::before { background-color: var(--color-info); }
     .state-closed::before { background-color: var(--color-warning); }
     .state-revealed::before { background-color: var(--color-success); }
     ```

  2. Review dashboard.html and view.html - ensure all session-state badges have the appropriate state-* class applied. These should already have classes like `state-capturing`, `state-closed`, etc. No template changes needed if classes are present.

  Note: The ::before pseudo-element adds a colored dot that provides shape differentiation in addition to color. Users who cannot distinguish colors can see the dot pattern changes with state.
  </action>
  <verify>
  - View dashboard with sessions in different states
  - Each state badge should show a dot before the text
  - States should be distinguishable even in grayscale
  </verify>
  <done>Status badges show dots that provide shape differentiation alongside color</done>
</task>

<task type="auto">
  <name>Task 3: Audit Form Labels and Fix Login</name>
  <files>the55/app/templates/login.html</files>
  <action>
  1. Verify login.html has proper label-input association:
     - The login form already has a visible label "Password" with for="password"
     - The input has id="password" - this is correctly associated
     - No changes needed to login.html (audit confirms compliance)

  2. Verify other key forms have labels (audit only, document findings):
     - settings.html: Has labels for password fields
     - teams/create.html: Has labels for all fields
     - sessions/create.html: Has labels for all fields

  If any labels are missing, add them following the pattern:
  ```html
  <label for="field-id">Field Name</label>
  <input type="text" id="field-id" name="field_name">
  ```

  Note: Based on research audit, form labels appear to be present. This task is primarily verification.
  </action>
  <verify>
  - Run through login page - label is visible and clicking label focuses input
  - Check settings page - password labels visible
  - Check team create - all labels visible
  </verify>
  <done>All form inputs have visible, properly associated labels (WCAG 1.3.1 compliant)</done>
</task>

</tasks>

<verification>
1. Skip link test: Press Tab on any page, skip link appears
2. Focus-visible test: Tab through elements shows focus ring, click does not
3. Status badges: View dashboard, states show icon dots
4. Form labels: Click label text, input receives focus
</verification>

<success_criteria>
- Skip link visible on Tab key press
- Focus rings appear only for keyboard navigation
- Status badges have icon indicators (not color-only)
- All form inputs have associated visible labels
- WCAG 2.4.1, 2.4.7, 1.4.1, 1.3.1 criteria addressed
</success_criteria>

<output>
After completion, create `.planning/phases/28-polish-integration/28-01-SUMMARY.md`
</output>
