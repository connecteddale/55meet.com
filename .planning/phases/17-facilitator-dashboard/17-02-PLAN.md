---
phase: 26-facilitator-dashboard
plan: 02
type: execute
wave: 2
depends_on: ["26-01"]
files_modified:
  - the55/app/templates/admin/dashboard.html
  - the55/app/templates/admin/settings.html
  - the55/app/static/js/dashboard.js
  - the55/app/static/css/main.css
autonomous: true

must_haves:
  truths:
    - "Dashboard shows active sessions prominently at top"
    - "Dashboard shows all teams with search/filter"
    - "Dashboard shows recent activity feed"
    - "Search filters teams and sessions by name or date in real-time"
    - "One-click creates new session for any team"
    - "Settings page has password change form"
    - "Navigation includes Dashboard and Settings links"
  artifacts:
    - path: "the55/app/templates/admin/dashboard.html"
      provides: "Sessions-first dashboard layout"
      contains: "active_sessions"
    - path: "the55/app/templates/admin/settings.html"
      provides: "Password change form"
      contains: "current_password"
    - path: "the55/app/static/js/dashboard.js"
      provides: "Client-side search filter"
      contains: "data-searchable"
    - path: "the55/app/static/css/main.css"
      provides: "Dashboard section styles"
      contains: "command-center"
  key_links:
    - from: "the55/app/templates/admin/dashboard.html"
      to: "the55/app/static/js/dashboard.js"
      via: "script tag"
      pattern: "dashboard\\.js"
    - from: "the55/app/templates/admin/dashboard.html"
      to: "/admin/sessions/team/{team_id}/create"
      via: "New Session link"
      pattern: "sessions/team.*create"
---

<objective>
Create sessions-first dashboard UI with search, settings page, and premium styling.

Purpose: Transform the minimal teams-list dashboard into a command center that matches facilitator workflow - sessions first, teams accessible, recent history visible.

Output: Redesigned dashboard.html, new settings.html, dashboard.js for search, updated CSS.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/26-facilitator-dashboard/26-RESEARCH.md
@.planning/phases/26-facilitator-dashboard/26-01-SUMMARY.md
@the55/app/templates/admin/dashboard.html
@the55/app/static/css/variables.css
@the55/app/static/css/main.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create dashboard.js for client-side search</name>
  <files>the55/app/static/js/dashboard.js</files>
  <action>
Create new file at the55/app/static/js/dashboard.js with client-side search filter:

```javascript
/**
 * The 55 - Dashboard Client-Side Search
 *
 * Filters team cards and session cards based on search input.
 * Uses data-searchable attributes for search text.
 * Supports filtering by team name OR date (month/year).
 */
(function() {
    'use strict';

    const searchInput = document.getElementById('dashboard-search');
    if (!searchInput) return;

    let debounceTimer;

    searchInput.addEventListener('input', function(e) {
        clearTimeout(debounceTimer);
        debounceTimer = setTimeout(() => {
            filterItems(e.target.value);
        }, 150);
    });

    function filterItems(searchTerm) {
        const term = searchTerm.toLowerCase().trim();
        const items = document.querySelectorAll('[data-searchable]');
        let visibleCount = 0;

        items.forEach(item => {
            const searchText = item.dataset.searchable.toLowerCase();
            const isVisible = !term || searchText.includes(term);
            item.classList.toggle('hidden', !isVisible);
            if (isVisible) visibleCount++;
        });

        // Update empty state visibility
        const emptyState = document.getElementById('search-empty-state');
        if (emptyState) {
            emptyState.classList.toggle('hidden', visibleCount > 0 || !term);
        }

        // Update visible count badge
        const countBadge = document.getElementById('teams-count');
        if (countBadge) {
            const totalCount = items.length;
            countBadge.textContent = term ? `${visibleCount} of ${totalCount}` : totalCount;
        }
    }
})();
```
  </action>
  <verify>`cat the55/app/static/js/dashboard.js | head -20` shows the filter function</verify>
  <done>Client-side search JavaScript file created with debounced filtering.</done>
</task>

<task type="auto">
  <name>Task 2: Redesign dashboard.html with sessions-first layout</name>
  <files>the55/app/templates/admin/dashboard.html</files>
  <action>
Replace entire contents of the55/app/templates/admin/dashboard.html with sessions-first layout:

```html
{% extends "base.html" %}

{% block title %}Dashboard - The 55{% endblock %}

{% block nav %}
<nav class="admin-nav">
    <div class="nav-links">
        <a href="/admin" class="nav-link nav-link-active">Dashboard</a>
        <a href="/admin/settings" class="nav-link">Settings</a>
    </div>
    <a href="/admin/logout" class="btn btn-ghost btn-small">Logout</a>
</nav>
{% endblock %}

{% block content %}
<div class="dashboard command-center">
    <header class="dashboard-header">
        <h1>The 55</h1>
        <p class="dashboard-tagline">55 minutes. Once a month. The truth about where the team actually is.</p>
    </header>

    <!-- Active Sessions Section (Sessions-First) -->
    <section class="dashboard-section dashboard-section-primary">
        <div class="section-header">
            <h2>Active Sessions</h2>
            <span class="section-badge">{{ active_sessions | length }} this month</span>
        </div>

        {% if active_sessions %}
        <div class="session-cards">
            {% for session in active_sessions %}
            <a href="/admin/sessions/{{ session.id }}" class="card card-link session-card session-card-active" data-searchable="{{ session.team.company_name }} {{ session.team.team_name }} {{ session.month }}">
                <div class="session-team">{{ session.team.company_name }}</div>
                <div class="session-team-name">{{ session.team.team_name }}</div>
                <div class="session-meta">
                    <span class="session-month">{{ session.month }}</span>
                    <span class="session-state state-{{ session.state.value }}">{{ session.state.value }}</span>
                </div>
            </a>
            {% endfor %}
        </div>
        {% else %}
        <div class="empty-state">
            <p>No active sessions this month.</p>
            <p class="text-secondary">Start a session from a team below.</p>
        </div>
        {% endif %}
    </section>

    <!-- Teams with One-Click Session -->
    <section class="dashboard-section" id="teams">
        <div class="section-header">
            <h2>Teams</h2>
            <div class="section-header-actions">
                <span class="section-badge" id="teams-count">{{ teams | length }}</span>
                <input type="search" id="dashboard-search" placeholder="Search teams or dates..." class="search-input">
                <a href="/admin/teams/create" class="btn btn-primary btn-small">New Team</a>
            </div>
        </div>

        {% if teams %}
        <div class="team-grid">
            {% for team in teams %}
            <div class="card team-card" data-searchable="{{ team.company_name }} {{ team.team_name }}">
                <div class="team-company">{{ team.company_name }}</div>
                <div class="team-name">{{ team.team_name }}</div>
                <div class="team-meta">
                    <span class="team-code">{{ team.code }}</span>
                    <span class="team-members">{{ team.members | length }} members</span>
                </div>
                <div class="team-actions">
                    <a href="/admin/sessions/team/{{ team.id }}/create?month={{ current_month }}" class="btn btn-primary btn-small">New Session</a>
                    <a href="/admin/teams/{{ team.id }}" class="btn btn-ghost btn-small">Edit</a>
                </div>
            </div>
            {% endfor %}
        </div>
        <div id="search-empty-state" class="empty-state hidden">
            <p>No teams match your search.</p>
        </div>
        {% else %}
        <div class="empty-state">
            <p>No teams yet.</p>
            <a href="/admin/teams/create" class="btn btn-primary">Create Your First Team</a>
        </div>
        {% endif %}
    </section>

    <!-- Recent Activity -->
    <section class="dashboard-section">
        <div class="section-header">
            <h2>Recent Activity</h2>
            <a href="/admin/sessions/history" class="btn btn-ghost btn-small">View All</a>
        </div>

        {% if recent_sessions %}
        <div class="activity-list">
            {% for session in recent_sessions %}
            <a href="/admin/sessions/{{ session.id }}" class="activity-item">
                <span class="activity-icon">&#10003;</span>
                <span class="activity-text">
                    <strong>{{ session.team.team_name }}</strong>
                    <span class="text-secondary">{{ session.month }}</span>
                </span>
                <span class="activity-date text-secondary">
                    {% if session.revealed_at %}
                    {{ session.revealed_at.strftime('%b %d') }}
                    {% endif %}
                </span>
            </a>
            {% endfor %}
        </div>
        {% else %}
        <p class="text-secondary">No completed sessions yet.</p>
        {% endif %}
    </section>
</div>

<script src="/static/js/dashboard.js"></script>
{% endblock %}
```

**Key change for DASH-03:** Session cards now include `data-searchable="{{ session.team.company_name }} {{ session.team.team_name }} {{ session.month }}"` which allows filtering by team name OR date (e.g., typing "2026-01" filters to January 2026 sessions). The search placeholder also updated to "Search teams or dates..." for discoverability.
  </action>
  <verify>Visit /admin after login - should show sessions-first layout with search box that filters both teams and sessions by name or date</verify>
  <done>Dashboard template shows active sessions with searchable date attributes, teams with search, and recent activity.</done>
</task>

<task type="auto">
  <name>Task 3: Create settings.html template and add dashboard CSS</name>
  <files>the55/app/templates/admin/settings.html, the55/app/static/css/main.css</files>
  <action>
**Part A: Create the55/app/templates/admin/settings.html**

```html
{% extends "base.html" %}

{% block title %}Settings - The 55{% endblock %}

{% block nav %}
<nav class="admin-nav">
    <div class="nav-links">
        <a href="/admin" class="nav-link">Dashboard</a>
        <a href="/admin/settings" class="nav-link nav-link-active">Settings</a>
    </div>
    <a href="/admin/logout" class="btn btn-ghost btn-small">Logout</a>
</nav>
{% endblock %}

{% block content %}
<div class="settings-page">
    <header class="settings-header">
        <h1>Settings</h1>
    </header>

    <section class="settings-section">
        <h2>Change Password</h2>

        {% if success %}
        <div class="alert alert-success">
            {{ success }}
        </div>
        {% endif %}

        {% if error %}
        <div class="alert alert-error">
            {{ error }}
        </div>
        {% endif %}

        <form method="POST" action="/admin/settings/password" class="settings-form">
            <div class="form-group">
                <label for="current_password">Current Password</label>
                <input type="password" id="current_password" name="current_password" required
                       autocomplete="current-password" class="form-input">
            </div>

            <div class="form-group">
                <label for="new_password">New Password</label>
                <input type="password" id="new_password" name="new_password" required
                       minlength="8" autocomplete="new-password" class="form-input">
                <span class="form-hint">Minimum 8 characters</span>
            </div>

            <div class="form-group">
                <label for="confirm_password">Confirm New Password</label>
                <input type="password" id="confirm_password" name="confirm_password" required
                       minlength="8" autocomplete="new-password" class="form-input">
            </div>

            <div class="form-actions">
                <button type="submit" class="btn btn-primary">Update Password</button>
            </div>
        </form>
    </section>
</div>
{% endblock %}
```

**Part B: Add dashboard styles to the55/app/static/css/main.css**

Append the following CSS to the end of main.css:

```css
/* ============================================
   DASHBOARD - Command Center
   ============================================ */

.command-center {
    max-width: var(--container-max);
    margin: 0 auto;
    padding: var(--space-6) var(--container-padding);
}

.dashboard-header {
    margin-bottom: var(--space-8);
}

.dashboard-header h1 {
    font-size: var(--text-3xl);
    font-weight: 700;
    letter-spacing: var(--tracking-tight);
    margin: 0 0 var(--space-2) 0;
}

.dashboard-tagline {
    color: var(--color-text-secondary);
    font-size: var(--text-base);
    margin: 0;
}

/* Dashboard Sections */
.dashboard-section {
    margin-bottom: var(--space-10);
}

.dashboard-section-primary {
    background: var(--color-bg-secondary);
    padding: var(--space-6);
    border-radius: 12px;
    margin-bottom: var(--space-8);
}

.section-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    flex-wrap: wrap;
    gap: var(--space-3);
    margin-bottom: var(--space-4);
}

.section-header h2 {
    font-size: var(--text-xl);
    font-weight: 600;
    letter-spacing: var(--tracking-snug);
    margin: 0;
}

.section-header-actions {
    display: flex;
    align-items: center;
    gap: var(--space-3);
}

.section-badge {
    background: var(--color-primary-light);
    color: var(--color-primary);
    padding: var(--space-1) var(--space-3);
    border-radius: 100px;
    font-size: var(--text-sm);
    font-weight: 500;
}

/* Session Cards */
.session-cards {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: var(--space-4);
}

.session-card {
    background: var(--color-bg);
    padding: var(--space-4);
    border-radius: 8px;
    border: 1px solid var(--color-border-light);
    transition: box-shadow var(--duration-fast) var(--ease-out);
}

.session-card:hover {
    box-shadow: var(--shadow-md);
}

.session-card-active {
    border-left: 3px solid var(--color-primary);
}

.session-team {
    font-size: var(--text-sm);
    color: var(--color-text-secondary);
    margin-bottom: var(--space-1);
}

.session-team-name {
    font-size: var(--text-lg);
    font-weight: 600;
    margin-bottom: var(--space-3);
}

.session-meta {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.session-month {
    font-size: var(--text-sm);
    color: var(--color-text-secondary);
}

.session-state {
    padding: var(--space-1) var(--space-2);
    border-radius: 4px;
    font-size: var(--text-xs);
    font-weight: 500;
    text-transform: capitalize;
}

.state-draft { background: var(--color-bg-secondary); color: var(--color-text-secondary); }
.state-capturing { background: #e5f7ed; color: #1a7f4b; }
.state-closed { background: #fff3e5; color: #b35c00; }
.state-revealed { background: var(--color-primary-light); color: var(--color-primary); }

/* Team Grid */
.team-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: var(--space-4);
}

.team-card {
    background: var(--color-bg);
    padding: var(--space-4);
    border-radius: 8px;
    border: 1px solid var(--color-border-light);
}

.team-company {
    font-size: var(--text-sm);
    color: var(--color-text-secondary);
    margin-bottom: var(--space-1);
}

.team-name {
    font-size: var(--text-lg);
    font-weight: 600;
    margin-bottom: var(--space-2);
}

.team-meta {
    display: flex;
    gap: var(--space-3);
    margin-bottom: var(--space-4);
    font-size: var(--text-sm);
    color: var(--color-text-secondary);
}

.team-code {
    font-family: monospace;
    background: var(--color-bg-secondary);
    padding: var(--space-1) var(--space-2);
    border-radius: 4px;
}

.team-actions {
    display: flex;
    gap: var(--space-2);
}

/* Search Input */
.search-input {
    padding: var(--space-2) var(--space-3);
    border: 1px solid var(--color-border);
    border-radius: 6px;
    font-size: var(--text-sm);
    font-family: var(--font-family);
    min-width: 200px;
    transition: border-color var(--duration-fast) var(--ease-out);
}

.search-input:focus {
    outline: none;
    border-color: var(--color-primary);
}

.search-input::placeholder {
    color: var(--color-text-tertiary);
}

/* Activity List */
.activity-list {
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
}

.activity-item {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    padding: var(--space-3) var(--space-4);
    background: var(--color-bg);
    border: 1px solid var(--color-border-light);
    border-radius: 8px;
    text-decoration: none;
    color: var(--color-text);
    transition: background var(--duration-fast) var(--ease-out);
}

.activity-item:hover {
    background: var(--color-bg-secondary);
}

.activity-icon {
    color: var(--color-success);
    font-weight: bold;
}

.activity-text {
    flex: 1;
    display: flex;
    flex-direction: column;
}

.activity-date {
    font-size: var(--text-sm);
}

/* Admin Navigation */
.admin-nav {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: var(--space-3) var(--space-4);
    border-bottom: 1px solid var(--color-border-light);
}

.nav-links {
    display: flex;
    gap: var(--space-4);
}

.nav-link {
    color: var(--color-text-secondary);
    text-decoration: none;
    font-weight: 500;
    padding: var(--space-2) 0;
    transition: color var(--duration-fast) var(--ease-out);
}

.nav-link:hover {
    color: var(--color-text);
}

.nav-link-active {
    color: var(--color-primary);
    border-bottom: 2px solid var(--color-primary);
}

/* Settings Page */
.settings-page {
    max-width: 600px;
    margin: 0 auto;
    padding: var(--space-6) var(--container-padding);
}

.settings-header {
    margin-bottom: var(--space-8);
}

.settings-header h1 {
    font-size: var(--text-3xl);
    font-weight: 700;
    letter-spacing: var(--tracking-tight);
    margin: 0;
}

.settings-section {
    background: var(--color-bg);
    padding: var(--space-6);
    border-radius: 12px;
    border: 1px solid var(--color-border-light);
}

.settings-section h2 {
    font-size: var(--text-xl);
    font-weight: 600;
    margin: 0 0 var(--space-6) 0;
}

.settings-form {
    display: flex;
    flex-direction: column;
    gap: var(--space-4);
}

.form-group {
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
}

.form-group label {
    font-weight: 500;
    font-size: var(--text-sm);
}

.form-input {
    padding: var(--space-3);
    border: 1px solid var(--color-border);
    border-radius: 6px;
    font-size: var(--text-base);
    font-family: var(--font-family);
    transition: border-color var(--duration-fast) var(--ease-out);
}

.form-input:focus {
    outline: none;
    border-color: var(--color-primary);
}

.form-hint {
    font-size: var(--text-sm);
    color: var(--color-text-tertiary);
}

.form-actions {
    margin-top: var(--space-4);
}

/* Alerts */
.alert {
    padding: var(--space-4);
    border-radius: 8px;
    margin-bottom: var(--space-4);
}

.alert-success {
    background: #e5f7ed;
    color: #1a7f4b;
    border: 1px solid #b3e6c9;
}

.alert-error {
    background: #ffebe9;
    color: #cf222e;
    border: 1px solid #ffcecb;
}

/* Utility: Hidden */
.hidden {
    display: none !important;
}

/* Empty state improvements */
.empty-state {
    text-align: center;
    padding: var(--space-6);
    color: var(--color-text-secondary);
}

.empty-state .btn {
    margin-top: var(--space-4);
}

/* Text utilities */
.text-secondary {
    color: var(--color-text-secondary);
}

/* Button small variant */
.btn-small {
    padding: var(--space-2) var(--space-3);
    font-size: var(--text-sm);
}

/* Button ghost variant */
.btn-ghost {
    background: transparent;
    color: var(--color-text-secondary);
    border: 1px solid var(--color-border);
}

.btn-ghost:hover {
    background: var(--color-bg-secondary);
    color: var(--color-text);
}

/* Card link - removes text decoration */
.card-link {
    text-decoration: none;
    color: inherit;
    display: block;
}

/* Mobile responsive */
@media (max-width: 640px) {
    .section-header {
        flex-direction: column;
        align-items: flex-start;
    }

    .section-header-actions {
        width: 100%;
        flex-wrap: wrap;
    }

    .search-input {
        flex: 1;
        min-width: 150px;
    }

    .team-grid,
    .session-cards {
        grid-template-columns: 1fr;
    }
}
```
  </action>
  <verify>
1. Visit /admin - dashboard should show styled with premium design tokens
2. Visit /admin/settings - should show password change form
3. Type in search box - teams and sessions should filter in real-time by name or date
  </verify>
  <done>Settings template created, dashboard CSS added with command-center styling, search works for teams and sessions by name or date, mobile responsive.</done>
</task>

</tasks>

<verification>
1. Start the app and login at /admin/login
2. Dashboard at /admin shows:
   - Active Sessions section at top (may be empty if no current month sessions)
   - Teams section with search box and New Team button
   - Recent Activity section
3. Type in search box - teams filter in real-time by name
4. Type a date like "2026-01" in search box - sessions filter by month
5. Click "New Session" on a team - redirects to session creation with month pre-filled
6. Click "Settings" in nav - shows password change form
7. Test password change with wrong current password - shows error
8. Test password change with mismatched passwords - shows error
9. Test password change with valid inputs - shows success message
</verification>

<success_criteria>
- Dashboard shows sessions-first layout with active sessions, teams, recent activity
- Search filters teams by name and sessions by team name or date (month) client-side without page reload
- Settings page has working password change form
- Navigation between Dashboard and Settings works
- All elements styled with design tokens from Phase 23
- Mobile responsive at 375px viewport
</success_criteria>

<output>
After completion, create `.planning/phases/26-facilitator-dashboard/26-02-SUMMARY.md`
</output>
