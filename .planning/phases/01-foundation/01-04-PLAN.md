---
phase: 10-foundation
plan: 04
type: execute
wave: 2
depends_on: [10-01]
files_modified:
  - the55/app/static/css/main.css
  - the55/app/static/css/variables.css
  - the55/app/templates/base.html
  - the55/app/templates/components/header.html
autonomous: true

must_haves:
  truths:
    - "Layout works at 375px viewport width"
    - "No horizontal scroll on mobile"
    - "Touch targets minimum 44px"
  artifacts:
    - path: "the55/app/static/css/main.css"
      provides: "Core stylesheet"
      contains: "min-height: 100dvh"
    - path: "the55/app/templates/base.html"
      provides: "Base template with mobile viewport"
      contains: "viewport"
  key_links:
    - from: "base.html"
      to: "main.css"
      via: "stylesheet link"
      pattern: "href=\"/static/css/main.css\""
---

<objective>
Create mobile-first CSS foundation and base templates for The 55 App.

Purpose: Establish responsive design patterns that all UI builds upon.
Output: CSS framework with 375px mobile support and base HTML templates.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/research/STACK.md
@.planning/research/PITFALLS.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create CSS variables and reset</name>
  <files>the55/app/static/css/variables.css</files>
  <action>
    Create variables.css with design tokens:
    ```css
    :root {
      /* Colors */
      --color-primary: #2563eb;
      --color-primary-dark: #1d4ed8;
      --color-secondary: #64748b;
      --color-success: #22c55e;
      --color-warning: #f59e0b;
      --color-error: #ef4444;

      --color-bg: #ffffff;
      --color-bg-secondary: #f8fafc;
      --color-text: #1e293b;
      --color-text-muted: #64748b;
      --color-border: #e2e8f0;

      /* Typography */
      --font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      --font-size-xs: 0.75rem;
      --font-size-sm: 0.875rem;
      --font-size-base: 1rem;
      --font-size-lg: 1.125rem;
      --font-size-xl: 1.25rem;
      --font-size-2xl: 1.5rem;
      --font-size-3xl: 1.875rem;

      /* Spacing */
      --space-1: 0.25rem;
      --space-2: 0.5rem;
      --space-3: 0.75rem;
      --space-4: 1rem;
      --space-6: 1.5rem;
      --space-8: 2rem;
      --space-12: 3rem;

      /* Layout */
      --container-max: 1200px;
      --container-padding: var(--space-4);

      /* Touch targets */
      --touch-target-min: 44px;

      /* Transitions */
      --transition-fast: 150ms ease;
      --transition-base: 200ms ease;
    }
    ```
  </action>
  <verify>File contains --touch-target-min: 44px</verify>
  <done>CSS variables defined</done>
</task>

<task type="auto">
  <name>Task 2: Create main stylesheet with mobile-first approach</name>
  <files>the55/app/static/css/main.css</files>
  <action>
    Create main.css:
    ```css
    @import url('variables.css');

    /* Reset */
    *, *::before, *::after {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    /* Base */
    html {
      font-size: 16px;
      -webkit-text-size-adjust: 100%;
    }

    body {
      font-family: var(--font-family);
      font-size: var(--font-size-base);
      line-height: 1.5;
      color: var(--color-text);
      background-color: var(--color-bg);
      min-height: 100dvh; /* Use dvh for mobile Safari */
      display: flex;
      flex-direction: column;
    }

    /* Typography */
    h1 { font-size: var(--font-size-3xl); font-weight: 700; }
    h2 { font-size: var(--font-size-2xl); font-weight: 600; }
    h3 { font-size: var(--font-size-xl); font-weight: 600; }

    a {
      color: var(--color-primary);
      text-decoration: none;
    }
    a:hover { text-decoration: underline; }

    /* Layout */
    .container {
      width: 100%;
      max-width: var(--container-max);
      margin: 0 auto;
      padding: 0 var(--container-padding);
    }

    main {
      flex: 1;
      padding: var(--space-6) 0;
    }

    /* Header */
    header {
      background: var(--color-bg);
      border-bottom: 1px solid var(--color-border);
      padding: var(--space-4) 0;
    }

    header .container {
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
    }

    header h1 {
      font-size: var(--font-size-xl);
    }

    header nav a {
      padding: var(--space-2) var(--space-3);
      min-height: var(--touch-target-min);
      display: inline-flex;
      align-items: center;
    }

    /* Forms */
    .form-group {
      margin-bottom: var(--space-4);
    }

    label {
      display: block;
      margin-bottom: var(--space-2);
      font-weight: 500;
    }

    input[type="text"],
    input[type="password"],
    input[type="email"],
    textarea,
    select {
      width: 100%;
      padding: var(--space-3);
      font-size: var(--font-size-base);
      border: 1px solid var(--color-border);
      border-radius: 4px;
      min-height: var(--touch-target-min);
      transition: border-color var(--transition-fast);
    }

    input:focus,
    textarea:focus,
    select:focus {
      outline: none;
      border-color: var(--color-primary);
      box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
    }

    /* Buttons */
    .btn,
    button[type="submit"] {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: var(--space-3) var(--space-6);
      font-size: var(--font-size-base);
      font-weight: 500;
      min-height: var(--touch-target-min);
      border: none;
      border-radius: 4px;
      cursor: pointer;
      transition: background-color var(--transition-fast);
    }

    .btn-primary,
    button[type="submit"] {
      background-color: var(--color-primary);
      color: white;
    }

    .btn-primary:hover,
    button[type="submit"]:hover {
      background-color: var(--color-primary-dark);
    }

    .btn-secondary {
      background-color: var(--color-secondary);
      color: white;
    }

    /* Messages */
    .error-message {
      background-color: #fef2f2;
      border: 1px solid #fecaca;
      color: var(--color-error);
      padding: var(--space-3) var(--space-4);
      border-radius: 4px;
      margin-bottom: var(--space-4);
    }

    .success-message {
      background-color: #f0fdf4;
      border: 1px solid #bbf7d0;
      color: var(--color-success);
      padding: var(--space-3) var(--space-4);
      border-radius: 4px;
      margin-bottom: var(--space-4);
    }

    /* Login page */
    .login-page {
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 100dvh;
      background: var(--color-bg-secondary);
    }

    .login-container {
      background: var(--color-bg);
      padding: var(--space-8);
      border-radius: 8px;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
      width: 100%;
      max-width: 400px;
      margin: var(--space-4);
    }

    .login-container h1 {
      text-align: center;
      margin-bottom: var(--space-2);
    }

    .login-container h2 {
      text-align: center;
      font-size: var(--font-size-lg);
      color: var(--color-text-muted);
      font-weight: 400;
      margin-bottom: var(--space-6);
    }

    /* Cards */
    .card {
      background: var(--color-bg);
      border: 1px solid var(--color-border);
      border-radius: 8px;
      padding: var(--space-4);
      margin-bottom: var(--space-4);
    }

    /* Status indicators */
    .status {
      display: inline-flex;
      align-items: center;
      font-size: var(--font-size-sm);
      padding: var(--space-1) var(--space-2);
      border-radius: 4px;
    }

    .status-draft { background: #f1f5f9; color: var(--color-secondary); }
    .status-capturing { background: #dbeafe; color: var(--color-primary); }
    .status-closed { background: #fef3c7; color: var(--color-warning); }
    .status-revealed { background: #dcfce7; color: var(--color-success); }

    /* Responsive: ensure no horizontal scroll */
    img, video, iframe {
      max-width: 100%;
      height: auto;
    }

    /* Mobile-specific (375px and up is default) */
    @media (min-width: 640px) {
      :root {
        --container-padding: var(--space-6);
      }

      .login-container {
        padding: var(--space-12);
      }
    }

    @media (min-width: 768px) {
      header .container {
        flex-wrap: nowrap;
      }
    }

    /* iOS Safari touch fix: add cursor pointer to tappable elements */
    button, a, [role="button"] {
      cursor: pointer;
    }
    ```
  </action>
  <verify>File contains min-height: 100dvh</verify>
  <done>Mobile-first CSS with 375px support</done>
</task>

<task type="auto">
  <name>Task 3: Create base template</name>
  <files>the55/app/templates/base.html</files>
  <action>
    Create base.html:
    ```html
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
        <meta name="theme-color" content="#2563eb">
        <title>{% block title %}The 55{% endblock %}</title>
        <link rel="stylesheet" href="/static/css/main.css">
        {% block head %}{% endblock %}
    </head>
    <body{% block body_class %}{% endblock %}>
        {% block header %}
        <header>
            <div class="container">
                <h1><a href="/">The 55</a></h1>
                {% block nav %}{% endblock %}
            </div>
        </header>
        {% endblock %}

        <main>
            <div class="container">
                {% block content %}{% endblock %}
            </div>
        </main>

        {% block footer %}{% endblock %}

        {% block scripts %}{% endblock %}
    </body>
    </html>
    ```

    Update login.html to extend base:
    ```html
    {% extends "base.html" %}

    {% block title %}Login - The 55{% endblock %}

    {% block body_class %} class="login-page"{% endblock %}

    {% block header %}{% endblock %}

    {% block content %}
    <div class="login-container">
        <h1>The 55</h1>
        <h2>Facilitator Login</h2>

        {% if error %}
        <div class="error-message">{{ error }}</div>
        {% endif %}

        <form method="post" action="/admin/login">
            <div class="form-group">
                <label for="password">Password</label>
                <input type="password" id="password" name="password" required autofocus>
            </div>
            <button type="submit" class="btn-primary">Login</button>
        </form>
    </div>
    {% endblock %}
    ```

    Update admin/dashboard.html to extend base:
    ```html
    {% extends "base.html" %}

    {% block title %}Dashboard - The 55{% endblock %}

    {% block nav %}
    <nav>
        <a href="/admin/logout">Logout</a>
    </nav>
    {% endblock %}

    {% block content %}
    <h2>Dashboard</h2>
    <p>Welcome, Facilitator. Team management coming in Phase 11.</p>
    {% endblock %}
    ```
  </action>
  <verify>File contains viewport-fit=cover</verify>
  <done>Base template with mobile viewport</done>
</task>

<task type="auto">
  <name>Task 4: Test responsive layout</name>
  <files>None (testing only)</files>
  <action>
    Start app and verify mobile styling:
    ```bash
    cd /var/www/the55
    uvicorn app.main:app --host 0.0.0.0 --port 8055 &
    sleep 2

    # Test CSS loads
    curl -s http://localhost:8055/static/css/main.css | grep -q "100dvh" && echo "CSS loads OK"

    # Test login page
    curl -s http://localhost:8055/admin/login | grep -q "viewport" && echo "Viewport meta OK"

    pkill -f "uvicorn app.main:app"
    ```

    Manual verification checklist (for facilitator testing):
    - Open /admin/login on phone or browser at 375px width
    - Verify no horizontal scroll
    - Verify form inputs have 44px touch targets
    - Verify button has 44px height
  </action>
  <verify>CSS and templates load without 404</verify>
  <done>Responsive layout verified</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] variables.css defines design tokens
- [ ] main.css uses 100dvh not 100vh
- [ ] Touch targets minimum 44px
- [ ] base.html has viewport meta
- [ ] Login page works at 375px
- [ ] No horizontal scroll on mobile
</verification>

<success_criteria>
- All tasks completed
- CSS loads without errors
- Layout responsive at 375px
- Base template provides consistent structure
</success_criteria>

<output>
After completion, create `.planning/phases/10-foundation/10-04-SUMMARY.md`
</output>
