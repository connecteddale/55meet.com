---
phase: 25-interactive-demo
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - the55/app/fixtures/__init__.py
  - the55/app/fixtures/demo_company.py
  - the55/app/fixtures/demo_synthesis.py
  - the55/app/routers/demo.py
  - the55/app/main.py
autonomous: true
user_setup: []

must_haves:
  truths:
    - "Demo starts with one click from landing page"
    - "Demo shows Velocity Labs company with 5 personas"
    - "Demo does not touch production database"
    - "Each persona has distinct image and bullet responses"
  artifacts:
    - path: "the55/app/fixtures/demo_company.py"
      provides: "Velocity Labs data, 5 DemoMember personas"
      contains: "DemoCompany"
    - path: "the55/app/fixtures/demo_synthesis.py"
      provides: "Pre-crafted synthesis with themes, gap, insights"
      contains: "DEMO_SYNTHESIS"
    - path: "the55/app/routers/demo.py"
      provides: "Demo routes at /demo prefix"
      exports: ["router"]
    - path: "the55/app/main.py"
      provides: "Demo router included"
      contains: "demo_router"
  key_links:
    - from: "the55/app/main.py"
      to: "the55/app/routers/demo.py"
      via: "import and include_router"
      pattern: "include_router.*demo"
    - from: "the55/app/routers/demo.py"
      to: "the55/app/fixtures/demo_company.py"
      via: "DEMO_COMPANY import"
      pattern: "from app.fixtures.demo_company import"
---

<objective>
Create the demo backend infrastructure with fixture data and routing.

Purpose: Enable zero-friction demo experience by providing pre-populated data for Velocity Labs fictional company without touching production database. This plan establishes the data layer and API endpoints that Plan 02 will render.

Output: Demo router serving fixture data at /demo/* routes, ready for template integration.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/25-interactive-demo/25-RESEARCH.md

# Existing patterns to follow
@the55/app/routers/participant.py
@the55/app/main.py
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Demo Fixture Data</name>
  <files>
    the55/app/fixtures/__init__.py
    the55/app/fixtures/demo_company.py
    the55/app/fixtures/demo_synthesis.py
  </files>
  <action>
Create `the55/app/fixtures/` directory and fixture files.

**fixtures/__init__.py:**
```python
"""Demo fixture data for zero-friction product demonstration."""
from app.fixtures.demo_company import DEMO_COMPANY, DemoCompany, DemoMember
from app.fixtures.demo_synthesis import DEMO_SYNTHESIS, DemoSynthesis
```

**fixtures/demo_company.py:**
Create dataclasses for DemoCompany and DemoMember. Populate DEMO_COMPANY with Velocity Labs data from research:

```python
from dataclasses import dataclass, field
from typing import List

@dataclass
class DemoMember:
    id: str           # URL-safe identifier (e.g., "sarah")
    name: str         # Full name (e.g., "Sarah Chen")
    role: str         # Job title (e.g., "CEO")
    personality: str  # Brief descriptor (e.g., "Optimistic visionary")
    image_filename: str  # Actual image from library (assign during implementation)
    bullets: List[str] = field(default_factory=list)

@dataclass
class DemoCompany:
    name: str = "Velocity Labs"
    team_name: str = "Leadership Team"
    strategy: str = "Become the market leader in developer productivity tools by shipping faster than competitors while maintaining quality."
    members: List[DemoMember] = field(default_factory=list)
```

Populate 5 members from research (Sarah Chen CEO, Marcus Johnson CTO, Elena Rodriguez VP Product, James Park VP Engineering, Aisha Patel VP Sales) with their bullets from 25-RESEARCH.md.

For image_filename, select appropriate images from the existing library at `the55/app/static/images/library/`. Choose images that match the metaphors:
- Sarah (optimistic): Something bright/ascending
- Marcus (technical strain): Gears or machinery
- Elena (unclear direction): Crossroads or compass
- James (fragile): House of cards or precarious structure
- Aisha (competition): Race or competition

**fixtures/demo_synthesis.py:**
```python
from dataclasses import dataclass, field
from typing import List

@dataclass
class DemoInsight:
    statement: str
    participants: List[str]  # List of member names

@dataclass
class DemoSynthesis:
    themes: str
    gap_type: str  # "Direction", "Alignment", or "Commitment"
    gap_reasoning: str
    insights: List[DemoInsight] = field(default_factory=list)
    aha_moment: str = ""
```

Populate DEMO_SYNTHESIS with the pre-crafted content from 25-RESEARCH.md (themes paragraph, Direction gap, 5 attributed insights, a-ha moment text).
  </action>
  <verify>
```bash
cd /var/www/the55 && python -c "
from app.fixtures import DEMO_COMPANY, DEMO_SYNTHESIS
print(f'Company: {DEMO_COMPANY.name}')
print(f'Members: {len(DEMO_COMPANY.members)}')
for m in DEMO_COMPANY.members:
    print(f'  - {m.name} ({m.role}): {len(m.bullets)} bullets')
print(f'Gap type: {DEMO_SYNTHESIS.gap_type}')
print(f'Insights: {len(DEMO_SYNTHESIS.insights)}')
"
```
  </verify>
  <done>
- DEMO_COMPANY has 5 members with distinct personas
- Each member has 3-4 bullet points from research
- DEMO_SYNTHESIS has themes, Direction gap, 5 insights
- Python import succeeds without errors
  </done>
</task>

<task type="auto">
  <name>Task 2: Create Demo Router</name>
  <files>the55/app/routers/demo.py</files>
  <action>
Create demo router with endpoints for the step-based walkthrough. No database access.

```python
"""
The 55 App - Demo Router

Zero-friction product demonstration using fixture data.
No authentication, no database - pure stateless walkthrough.
"""

from fastapi import APIRouter, Request
from fastapi.templating import Jinja2Templates

from app.fixtures import DEMO_COMPANY, DEMO_SYNTHESIS

router = APIRouter(prefix="/demo", tags=["demo"])
templates = Jinja2Templates(directory="app/templates")

# Demo steps for progress tracking
DEMO_STEPS = [
    {"id": "intro", "title": "Welcome"},
    {"id": "team", "title": "Meet the Team"},
    {"id": "strategy", "title": "Their Strategy"},
    {"id": "persona", "title": "Choose Your Role"},
    {"id": "response", "title": "Your Response"},
    {"id": "submitted", "title": "Team Submitted"},
    {"id": "synthesis", "title": "The Synthesis"},
    {"id": "gap", "title": "The Gap"},
    {"id": "insights", "title": "Key Insights"},
    {"id": "aha", "title": "The A-Ha Moment"},
    {"id": "cta", "title": "Your Turn"},
]


def get_step_context(step_id: str) -> dict:
    """Get step index and total for progress indicator."""
    step_ids = [s["id"] for s in DEMO_STEPS]
    current = step_ids.index(step_id) + 1 if step_id in step_ids else 1
    return {"current_step": current, "total_steps": len(DEMO_STEPS), "steps": DEMO_STEPS}


@router.get("")
async def demo_landing(request: Request):
    """Demo entry point - overview and start button."""
    return templates.TemplateResponse(
        "demo/intro.html",
        {
            "request": request,
            "company": DEMO_COMPANY,
            **get_step_context("intro")
        }
    )


@router.get("/team")
async def demo_team(request: Request):
    """Meet Velocity Labs team."""
    return templates.TemplateResponse(
        "demo/team.html",
        {
            "request": request,
            "company": DEMO_COMPANY,
            **get_step_context("team")
        }
    )


@router.get("/strategy")
async def demo_strategy(request: Request):
    """Show team strategy statement."""
    return templates.TemplateResponse(
        "demo/strategy.html",
        {
            "request": request,
            "company": DEMO_COMPANY,
            **get_step_context("strategy")
        }
    )


@router.get("/persona")
async def demo_persona_select(request: Request):
    """Choose which team member to experience demo as."""
    return templates.TemplateResponse(
        "demo/persona.html",
        {
            "request": request,
            "company": DEMO_COMPANY,
            **get_step_context("persona")
        }
    )


@router.get("/as/{member_id}")
async def demo_response(request: Request, member_id: str):
    """Show selected persona's response (image + bullets)."""
    member = next((m for m in DEMO_COMPANY.members if m.id == member_id), None)
    if not member:
        member = DEMO_COMPANY.members[0]  # Default to first member

    return templates.TemplateResponse(
        "demo/response.html",
        {
            "request": request,
            "company": DEMO_COMPANY,
            "member": member,
            **get_step_context("response")
        }
    )


@router.get("/as/{member_id}/submitted")
async def demo_submitted(request: Request, member_id: str):
    """Show all team members have submitted."""
    member = next((m for m in DEMO_COMPANY.members if m.id == member_id), None)
    if not member:
        member = DEMO_COMPANY.members[0]

    return templates.TemplateResponse(
        "demo/submitted.html",
        {
            "request": request,
            "company": DEMO_COMPANY,
            "member": member,
            **get_step_context("submitted")
        }
    )


@router.get("/synthesis")
async def demo_synthesis_themes(request: Request):
    """Show synthesis themes."""
    return templates.TemplateResponse(
        "demo/synthesis.html",
        {
            "request": request,
            "company": DEMO_COMPANY,
            "synthesis": DEMO_SYNTHESIS,
            **get_step_context("synthesis")
        }
    )


@router.get("/gap")
async def demo_gap(request: Request):
    """Reveal the Direction gap."""
    return templates.TemplateResponse(
        "demo/gap.html",
        {
            "request": request,
            "company": DEMO_COMPANY,
            "synthesis": DEMO_SYNTHESIS,
            **get_step_context("gap")
        }
    )


@router.get("/insights")
async def demo_insights(request: Request):
    """Show attributed insights."""
    return templates.TemplateResponse(
        "demo/insights.html",
        {
            "request": request,
            "company": DEMO_COMPANY,
            "synthesis": DEMO_SYNTHESIS,
            **get_step_context("insights")
        }
    )


@router.get("/aha")
async def demo_aha(request: Request):
    """The a-ha moment - CEO vs team disconnect."""
    ceo = next((m for m in DEMO_COMPANY.members if m.role == "CEO"), DEMO_COMPANY.members[0])
    return templates.TemplateResponse(
        "demo/aha.html",
        {
            "request": request,
            "company": DEMO_COMPANY,
            "synthesis": DEMO_SYNTHESIS,
            "ceo": ceo,
            **get_step_context("aha")
        }
    )


@router.get("/start")
async def demo_cta(request: Request):
    """Final CTA - start for real."""
    return templates.TemplateResponse(
        "demo/cta.html",
        {
            "request": request,
            "company": DEMO_COMPANY,
            **get_step_context("cta")
        }
    )
```

Note: 11 steps (reduced from 13 in research - combined some steps for tighter flow).
  </action>
  <verify>
```bash
cd /var/www/the55 && python -c "
from app.routers.demo import router, DEMO_STEPS
print(f'Router prefix: {router.prefix}')
print(f'Routes: {len(router.routes)}')
for route in router.routes:
    print(f'  {route.methods} {route.path}')
print(f'Demo steps: {len(DEMO_STEPS)}')
"
```
  </verify>
  <done>
- Router has /demo prefix
- 11 endpoints defined (one per step + persona variations)
- Each endpoint returns template response with step context
- No database imports in demo router
  </done>
</task>

<task type="auto">
  <name>Task 3: Wire Demo Router into App</name>
  <files>the55/app/main.py</files>
  <action>
Add demo router import and include in main.py.

1. Add import at top with other routers:
```python
from app.routers import ..., demo_router
```

2. Update routers/__init__.py to export demo_router:
```python
from app.routers.demo import router as demo_router
```

3. Include router in main.py after other routers:
```python
app.include_router(demo_router)
```

The demo router should be included BEFORE the participant router since /demo comes before /join alphabetically, though FastAPI will match based on prefix so order shouldn't matter.
  </action>
  <verify>
```bash
cd /var/www/the55 && python -c "
from app.main import app
demo_routes = [r for r in app.routes if hasattr(r, 'path') and r.path.startswith('/demo')]
print(f'Demo routes mounted: {len(demo_routes) > 0}')
print('Demo paths:')
for r in app.routes:
    if hasattr(r, 'path') and '/demo' in r.path:
        print(f'  {r.path}')
"
```
  </verify>
  <done>
- demo_router exported from routers/__init__.py
- demo_router included in main.py
- /demo routes accessible in app
  </done>
</task>

</tasks>

<verification>
```bash
# Test fixture imports
cd /var/www/the55 && python -c "
from app.fixtures import DEMO_COMPANY, DEMO_SYNTHESIS
assert len(DEMO_COMPANY.members) == 5, 'Should have 5 members'
assert DEMO_SYNTHESIS.gap_type == 'Direction', 'Should be Direction gap'
print('Fixtures OK')
"

# Test router mounted
cd /var/www/the55 && python -c "
from app.main import app
routes = [r.path for r in app.routes if hasattr(r, 'path')]
assert '/demo' in routes or '/demo/' in routes or any('/demo' in r for r in routes), 'Demo route not found'
print('Router OK')
"

# Test HTTP endpoints (requires running server or TestClient)
cd /var/www/the55 && python -c "
from fastapi.testclient import TestClient
from app.main import app
client = TestClient(app)
# These will 500 until templates exist (Plan 02), but 500 != 404
resp = client.get('/demo')
print(f'GET /demo: {resp.status_code}')
# 500 is expected (no templates yet), 404 would mean router not mounted
assert resp.status_code != 404, '/demo should exist (may 500 without templates)'
"
```
</verification>

<success_criteria>
- Demo fixtures define Velocity Labs with 5 distinct personas
- Each persona has image_filename and 3-4 bullets from research
- DEMO_SYNTHESIS has pre-crafted themes, Direction gap, 5 insights
- Demo router has 11 endpoints matching step flow
- Router mounted in main.py at /demo prefix
- No database imports in fixtures or demo router
- GET /demo returns 500 (templates not yet created) not 404 (would mean router missing)
</success_criteria>

<output>
After completion, create `.planning/phases/25-interactive-demo/25-01-SUMMARY.md`
</output>
