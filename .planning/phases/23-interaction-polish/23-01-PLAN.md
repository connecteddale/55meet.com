---
phase: 36-interaction-polish
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - sites/55meet.com/static/css/transitions.css
  - sites/55meet.com/static/css/main.css
  - sites/55meet.com/templates/base.html
autonomous: true

must_haves:
  truths:
    - "Page navigation between participant screens shows smooth fade transition (forward) and slide (back)"
    - "Image card shows gentle scale-up (1.03) and primary border on selection with 0.2s ease-out timing"
    - "Desktop hover shows subtle border hint, mobile tap shows active state without hover"
    - "Users with prefers-reduced-motion see no animations (existing variables.css rule covers all)"
  artifacts:
    - path: "sites/55meet.com/static/css/transitions.css"
      provides: "View Transition configuration and keyframes"
      contains: "@view-transition"
    - path: "sites/55meet.com/static/css/main.css"
      provides: "Updated image-card selection animation"
      contains: "scale(1.03)"
    - path: "sites/55meet.com/templates/base.html"
      provides: "Link to transitions.css"
      contains: "transitions.css"
  key_links:
    - from: "templates/base.html"
      to: "static/css/transitions.css"
      via: "link rel stylesheet"
      pattern: "transitions\\.css"
    - from: "static/css/transitions.css"
      to: "browser View Transitions API"
      via: "@view-transition rule"
      pattern: "@view-transition"
---

<objective>
Add smooth CSS page transitions (View Transitions API) and polish image selection animation with proper touch/hover separation.

Purpose: POLISH-01 (page transitions) and TOUCH-02 (image selection feel) make the participant flow feel premium and responsive.
Output: transitions.css with View Transition config, updated image-card CSS with refined animation timing and touch states.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/ROADMAP.md (Phase 36 section)
@sites/55meet.com/static/css/variables.css (design tokens, existing reduced-motion rule)
@sites/55meet.com/static/css/main.css (lines 1325-1366: current .image-card rules)
@sites/55meet.com/templates/base.html (head section for new stylesheet link)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create transitions.css with View Transitions API config</name>
  <files>sites/55meet.com/static/css/transitions.css, sites/55meet.com/templates/base.html</files>
  <action>
Create `static/css/transitions.css` with:

1. MPA View Transition opt-in:
```css
@view-transition {
    navigation: auto;
}
```

2. Default cross-fade for all navigations (the browser default, but make explicit):
```css
::view-transition-old(root) {
    animation: fade-out 200ms var(--ease-out);
}
::view-transition-new(root) {
    animation: fade-in 200ms var(--ease-out);
}
@keyframes fade-out {
    from { opacity: 1; }
    to { opacity: 0; }
}
@keyframes fade-in {
    from { opacity: 0; }
    to { opacity: 1; }
}
```

3. Back navigation slide (uses browser navigation direction via CSS):
```css
@view-transition-navigation(back) {
    &::view-transition-old(root) {
        animation: slide-to-right 250ms var(--ease-out);
    }
    &::view-transition-new(root) {
        animation: slide-from-left 250ms var(--ease-out);
    }
}
@keyframes slide-to-right {
    from { transform: translateX(0); opacity: 1; }
    to { transform: translateX(30px); opacity: 0; }
}
@keyframes slide-from-left {
    from { transform: translateX(-30px); opacity: 0; }
    to { transform: translateX(0); opacity: 1; }
}
```

Note: Use CSS custom properties from variables.css (--ease-out) for timing. The --ease-out is `cubic-bezier(0.16, 1, 0.3, 1)`.

4. Reduced motion override (belt-and-suspenders with variables.css global rule):
```css
@media (prefers-reduced-motion: reduce) {
    @view-transition {
        navigation: auto;
    }
    ::view-transition-old(root),
    ::view-transition-new(root) {
        animation-duration: 0.01ms !important;
    }
}
```

Then in `templates/base.html`, add the transitions.css link AFTER main.css:
```html
<link rel="stylesheet" href="/static/css/transitions.css">
```

Place it on the line immediately after the existing main.css link tag.
  </action>
  <verify>
Verify file exists: `ls sites/55meet.com/static/css/transitions.css`
Verify base.html includes link: `grep 'transitions.css' sites/55meet.com/templates/base.html`
Verify @view-transition rule: `grep '@view-transition' sites/55meet.com/static/css/transitions.css`
  </verify>
  <done>transitions.css exists with @view-transition navigation auto, fade keyframes, slide-back keyframes, and reduced-motion override. base.html links to it after main.css.</done>
</task>

<task type="auto">
  <name>Task 2: Polish image-card selection animation and touch states</name>
  <files>sites/55meet.com/static/css/main.css</files>
  <action>
Update the `.image-card` CSS section (currently lines 1325-1366 in main.css).

Replace the existing rules with:

```css
/* Image Card */
.image-card {
    position: relative;
    cursor: pointer;  /* CP-3: iOS Safari touch fix */
    border: 2px solid transparent;
    border-radius: 8px;
    overflow: hidden;
    transition: border-color 0.2s var(--ease-out), transform 0.2s var(--ease-out), box-shadow 0.2s var(--ease-out);
    background: var(--color-bg-secondary);
    -webkit-tap-highlight-color: transparent;
}

/* Desktop hover only - no hover flash on mobile touch */
@media (hover: hover) {
    .image-card:hover {
        border-color: var(--color-border);
        transform: scale(1.01);
    }
}

/* Touch/tap active state for mobile */
.image-card:active {
    transform: scale(0.98);
    transition-duration: 0.05s;
}

.image-card:focus-visible {
    outline: 2px solid var(--color-primary);
    outline-offset: 2px;
}

.image-card.selected {
    border-color: var(--color-primary);
    transform: scale(1.03);
    box-shadow: 0 4px 12px rgba(0, 102, 204, 0.25);
}

/* Prevent hover override on selected state */
@media (hover: hover) {
    .image-card.selected:hover {
        transform: scale(1.03);
    }
}
```

Key changes from current:
- Transition timing: 0.15s -> 0.2s with var(--ease-out) for premium feel
- Added transition on box-shadow for smoother selection
- Scale: 1.02 -> 1.03 per TOUCH-02 requirement
- box-shadow: uses --color-primary (0066cc) not the old blue (2563eb)
- `:hover` wrapped in `@media (hover: hover)` to prevent ghost hover on mobile
- Added `:active` press state (scale 0.98) for tactile mobile feedback
- Changed `:focus` to `:focus-visible` (keyboard only, not click)
- Added `-webkit-tap-highlight-color: transparent` to remove iOS blue flash
- Preserved `.image-card img` and `.image-card .image-number` rules unchanged

Do NOT modify lines outside the .image-card section. Keep `.image-card img` (line 1350-1355) and `.image-card .image-number` (line 1357-1366) exactly as they are.
  </action>
  <verify>
Check updated scale value: `grep 'scale(1.03)' sites/55meet.com/static/css/main.css`
Check hover media query: `grep 'hover: hover' sites/55meet.com/static/css/main.css`
Check ease-out timing: `grep '0.2s var(--ease-out)' sites/55meet.com/static/css/main.css`
Check tap highlight removal: `grep 'tap-highlight-color' sites/55meet.com/static/css/main.css`
  </verify>
  <done>Image cards scale to 1.03 on selection with 0.2s ease-out, desktop gets hover hint, mobile gets tap-down feedback via :active, no ghost hover on touch devices.</done>
</task>

</tasks>

<verification>
- `cat sites/55meet.com/static/css/transitions.css` contains @view-transition, fade keyframes, slide keyframes, reduced-motion block
- `grep 'transitions.css' sites/55meet.com/templates/base.html` returns the link tag
- `.image-card.selected` uses `transform: scale(1.03)` and `0.2s var(--ease-out)`
- `@media (hover: hover)` wraps the hover rule
- No syntax errors in CSS: all braces balanced
</verification>

<success_criteria>
- View Transitions API enabled for all MPA navigations (fade forward, slide back)
- Image selection shows scale(1.03) + primary border + shadow with 0.2s ease-out
- Desktop hover shows subtle scale(1.01) + border hint
- Mobile tap shows press-down (scale 0.98) without hover ghost
- prefers-reduced-motion disables all transition animations
</success_criteria>

<output>
After completion, create `.planning/phases/36-interaction-polish/36-01-SUMMARY.md`
</output>
