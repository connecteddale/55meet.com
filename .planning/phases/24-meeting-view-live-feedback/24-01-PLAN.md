---
phase: 37-meeting-view-live-feedback
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - sites/55meet.com/app/routers/participant.py
  - sites/55meet.com/templates/participant/waiting.html
autonomous: true

must_haves:
  truths:
    - "Participant waiting screen shows names of members who have already submitted"
    - "Names appear progressively as new members submit (via polling)"
    - "When state transitions to revealed, waiting page uses View Transitions API for smooth animated redirect to synthesis"
  artifacts:
    - path: "sites/55meet.com/app/routers/participant.py"
      provides: "Enhanced status endpoint with submitted member names"
      contains: "submitted_members"
    - path: "sites/55meet.com/templates/participant/waiting.html"
      provides: "Live names display and view-transition redirect"
      contains: "submitted_members"
  key_links:
    - from: "templates/participant/waiting.html"
      to: "/join/{code}/session/{id}/status"
      via: "fetch in checkStatus polling"
      pattern: "data\\.submitted_members"
    - from: "templates/participant/waiting.html"
      to: "/join/{code}/session/{id}/synthesis"
      via: "startViewTransition redirect"
      pattern: "startViewTransition"
---

<objective>
Add live progress display to the participant waiting screen and smooth animated transition to results.

Purpose: Participants see who else has submitted (social proof, reduces anxiety), and get a polished reveal when results become available.
Output: Enhanced participant status endpoint returning member names + waiting.html showing live names with animated redirect.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@sites/55meet.com/app/routers/participant.py (lines 607-662 — status endpoint)
@sites/55meet.com/templates/participant/waiting.html
@sites/55meet.com/static/css/transitions.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add submitted member names to participant status endpoint</name>
  <files>sites/55meet.com/app/routers/participant.py</files>
  <action>
In the `get_participant_status` endpoint (line 607), add a `submitted_members` array to the JSON response. This array should contain the names of members who have submitted responses.

After the existing `responses` query (line 629), build a set of member IDs who have submitted:
```python
submitted_ids = {r.member_id for r in responses}
```

Then build the submitted_members list:
```python
submitted_members = [
    {"name": m.name}
    for m in members
    if m.id in submitted_ids
]
```

Add `"submitted_members": submitted_members` to the JSONResponse dict (after "submitted_count").

Do NOT include member IDs in the participant-facing response (privacy — only names, no IDs). The admin endpoint already returns full member info; this is the participant-facing subset.
  </action>
  <verify>
Start the dev server and curl the endpoint:
```bash
curl -s http://localhost:8000/join/TESTCODE/session/1/status | python3 -m json.tool
```
Confirm response includes `submitted_members` array with `{name: "..."}` objects.
  </verify>
  <done>Participant status endpoint returns submitted_members array with name-only objects for each member who has submitted</done>
</task>

<task type="auto">
  <name>Task 2: Live names display and View Transition redirect on waiting page</name>
  <files>sites/55meet.com/templates/participant/waiting.html</files>
  <action>
Two changes to the waiting page:

**1. Add live submitted names section below the waiting message:**

After the `.waiting-status` div, add a new section:
```html
<div class="submitted-names" id="submitted-names" style="margin-top: 1.5rem; text-align: left; width: 100%; max-width: 320px; margin-left: auto; margin-right: auto;">
    <p style="font-size: 0.85rem; color: var(--color-text-muted); margin-bottom: 0.5rem;">Submitted:</p>
    <ul id="names-list" style="list-style: none; padding: 0; margin: 0; display: flex; flex-wrap: wrap; gap: 0.5rem;">
    </ul>
</div>
```

**2. Update the `checkStatus()` JS function to:**

a) Populate the names list from `data.submitted_members`:
```javascript
const namesList = document.getElementById('names-list');
if (namesList && data.submitted_members && data.submitted_members.length > 0) {
    document.getElementById('submitted-names').style.display = 'block';
    namesList.innerHTML = data.submitted_members.map(m =>
        `<li style="background: var(--color-primary-light, #e8f4f8); color: var(--color-primary-dark, #1a5276); padding: 0.25rem 0.75rem; border-radius: 1rem; font-size: 0.85rem; font-weight: 500;">${m.name}</li>`
    ).join('');
} else {
    document.getElementById('submitted-names').style.display = 'none';
}
```

b) Replace the plain `window.location.href = ...` redirect (in the `data.state === 'revealed'` branch) with a View Transition wrapper:
```javascript
if (data.state === 'revealed') {
    const url = `/join/${teamCode}/session/${sessionId}/synthesis`;
    if (document.startViewTransition) {
        document.startViewTransition(() => {
            window.location.href = url;
        });
    } else {
        window.location.href = url;
    }
    return;
}
```

Also update the `capturing` state message to include count: `Waiting for others (${data.submitted_count}/${data.total_members})...`

Initially hide the submitted-names div (add `style="display: none;"` to the outer div alongside the other styles).
  </action>
  <verify>
1. Load waiting page in browser, confirm names section appears after poll returns submitted_members
2. Test with multiple members submitting — names should accumulate as chips/badges
3. When session state changes to revealed, confirm smooth fade transition occurs (or fallback redirect in Firefox)
  </verify>
  <done>Waiting page shows live member name chips as they submit, and uses View Transitions API for smooth redirect to synthesis (with graceful fallback)</done>
</task>

</tasks>

<verification>
1. Participant status endpoint returns `submitted_members` array
2. Waiting page polls and displays member names as styled chips
3. Redirect to synthesis uses `document.startViewTransition()` with fallback
4. Names only (no IDs) exposed to participants
</verification>

<success_criteria>
- LIVE-01 satisfied: waiting screen shows live progress with member names
- LIVE-02 satisfied: animated transition from waiting to synthesis results
- Endpoint privacy maintained (names only, no IDs)
- Graceful degradation for browsers without View Transitions API
</success_criteria>

<output>
After completion, create `.planning/phases/37-meeting-view-live-feedback/37-01-SUMMARY.md`
</output>
