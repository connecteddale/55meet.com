{% extends "base.html" %}

{% block title %}Demo - The 55{% endblock %}

{% block header %}{% endblock %}

{% block content %}
<style>
    /* Scroll snap for full-page sections */
    html {
        scroll-behavior: smooth;
        scroll-snap-type: y mandatory;
    }

    /* Demo intro - scrolling sections like landing page */
    .demo-section {
        min-height: 100vh;
        min-height: 100dvh;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        padding: var(--space-8) var(--space-4);
        position: relative;
        scroll-snap-align: start;
        scroll-snap-stop: always;
    }

    .demo-content {
        max-width: 720px;
        text-align: center;
    }

    .demo-content.reveal {
        opacity: 0;
        transform: translateY(30px);
        transition: opacity 0.8s ease-out, transform 0.8s ease-out;
    }

    .demo-content.revealed {
        opacity: 1;
        transform: translateY(0);
    }

    .demo-eyebrow {
        font-size: var(--text-sm);
        font-weight: 600;
        color: var(--color-primary);
        text-transform: uppercase;
        letter-spacing: 0.1em;
        margin-bottom: var(--space-4);
        width: 100%;
        max-width: none;
        display: block;
        text-align: center;
    }

    .demo-headline {
        font-size: var(--text-4xl);
        letter-spacing: var(--tracking-tight);
        line-height: var(--leading-tight);
        margin-bottom: var(--space-6);
    }

    .demo-subheadline {
        font-size: var(--text-xl);
        color: var(--color-text-secondary);
        margin-bottom: var(--space-4);
    }

    .demo-body {
        font-size: var(--text-lg);
        color: var(--color-text-secondary);
        line-height: var(--leading-relaxed);
        margin-bottom: var(--space-4);
    }

    .demo-body:last-of-type {
        margin-bottom: 0;
    }

    .demo-strategy-quote {
        font-size: var(--text-xl);
        font-style: italic;
        color: var(--color-text);
        line-height: var(--leading-relaxed);
        margin: var(--space-6) 0;
    }

    .demo-scroll-cue {
        position: absolute;
        bottom: var(--space-8);
        left: 50%;
        transform: translateX(-50%);
        color: var(--color-text-tertiary);
        transition: color var(--duration-fast) var(--ease-out);
        animation: bounce 2s infinite;
    }

    .demo-scroll-cue:hover {
        color: var(--color-primary);
    }

    @keyframes bounce {
        0%, 20%, 50%, 80%, 100% { transform: translateX(-50%) translateY(0); }
        40% { transform: translateX(-50%) translateY(-10px); }
        60% { transform: translateX(-50%) translateY(-5px); }
    }

    /* Section variants */
    .demo-section-dark {
        background: var(--color-bg-secondary);
    }

    .demo-section-muted {
        background: var(--color-bg-tertiary);
    }

    /* ARR metrics */
    .demo-metrics {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: var(--space-4);
        margin: var(--space-6) 0;
        flex-wrap: wrap;
    }

    .demo-metric {
        text-align: center;
    }

    .demo-metric-value {
        font-size: var(--text-3xl);
        font-weight: 700;
        color: var(--color-text);
        display: block;
    }

    .demo-metric-label {
        font-size: var(--text-sm);
        color: var(--color-text-secondary);
    }

    .demo-metric-arrow {
        font-size: var(--text-2xl);
        color: var(--color-primary);
    }

    /* Strategy banner */
    .demo-strategy-banner {
        background: var(--color-bg);
        border: 1px solid var(--color-border-light);
        border-radius: 12px;
        padding: var(--space-6);
        margin: var(--space-6) 0;
        text-align: left;
    }

    .strategy-label {
        font-weight: 600;
        color: var(--color-primary);
        font-size: var(--text-sm);
        margin-bottom: var(--space-2);
    }

    .strategy-statement {
        font-size: var(--text-lg);
        font-style: italic;
        color: var(--color-text);
        margin: 0;
        line-height: var(--leading-relaxed);
    }

    .strategy-footnote {
        font-size: var(--text-xs);
        color: var(--color-text-tertiary);
        margin-top: var(--space-4);
    }

    /* Team grid - compact */
    .demo-team-grid {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: var(--space-4);
        margin: var(--space-4) auto;
        max-width: 500px;
    }

    .demo-team-member {
        text-align: center;
    }

    .demo-team-photo {
        width: 64px;
        height: 64px;
        border-radius: 50%;
        overflow: hidden;
        margin: 0 auto var(--space-2);
        border: 2px solid var(--color-border-light);
    }

    .demo-team-photo img {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }

    .demo-team-name {
        font-weight: 600;
        font-size: var(--text-sm);
        margin-bottom: 0;
    }

    .demo-team-role {
        font-size: var(--text-xs);
        color: var(--color-primary);
        margin-bottom: 0;
    }

    .demo-team-bio {
        display: none;
    }

    /* CTA button */
    .demo-cta {
        display: inline-flex;
        align-items: center;
        gap: var(--space-2);
        background: var(--color-primary);
        color: white;
        padding: var(--space-4) var(--space-8);
        border-radius: 8px;
        font-size: var(--text-lg);
        font-weight: 600;
        text-decoration: none;
        margin-top: var(--space-8);
        transition: background var(--duration-fast) var(--ease-out),
                    box-shadow var(--duration-fast) var(--ease-out),
                    transform var(--duration-fast) var(--ease-out);
    }

    .demo-cta:hover {
        background: var(--color-primary-dark);
        box-shadow: var(--shadow-md);
        transform: translateY(-1px);
        text-decoration: none;
    }

    .demo-cta:active {
        transform: translateY(0);
        box-shadow: var(--shadow-sm);
    }

    .demo-cta svg {
        width: 20px;
        height: 20px;
    }

    /* Floating brand badge */
    .brand-badge-floating {
        position: fixed;
        top: var(--space-4);
        left: var(--space-4);
        color: var(--color-text);
        font-size: var(--text-lg);
        font-weight: 700;
        text-decoration: none;
        z-index: 100;
        letter-spacing: var(--tracking-snug);
    }

    .brand-badge-floating:hover {
        color: var(--color-primary);
        text-decoration: none;
    }

    .demo-badge-floating {
        position: fixed;
        top: var(--space-4);
        right: var(--space-4);
        background: var(--color-primary);
        color: white;
        padding: var(--space-1) var(--space-3);
        border-radius: 9999px;
        font-size: var(--text-sm);
        font-weight: 600;
        z-index: 100;
        text-decoration: none;
    }

    .demo-badge-floating:hover {
        background: var(--color-primary-dark);
        text-decoration: none;
    }

    @media (max-width: 640px) {
        .demo-headline {
            font-size: var(--text-3xl);
        }

        .demo-subheadline {
            font-size: var(--text-lg);
        }

        .demo-body {
            font-size: var(--text-base);
        }

        .demo-team-grid {
            grid-template-columns: repeat(4, 1fr);
            gap: var(--space-2);
        }

        .demo-team-photo {
            width: 56px;
            height: 56px;
        }

        .demo-metric-value {
            font-size: var(--text-2xl);
        }
    }
</style>

<a href="/" class="brand-badge-floating">The 55</a>
<a href="/demo" class="demo-badge-floating">Demo</a>

<main>
    <!-- Section 1: Hero -->
    <section class="demo-section">
        <div class="demo-content">
            <p class="demo-eyebrow">The 55 Demo</p>
            <h1 class="demo-headline">Step into the CEO chair</h1>
            <p class="demo-subheadline">For the next few minutes, you're leading ClearBrief Inc.</p>
        </div>
        <a href="#company" class="demo-scroll-cue" aria-label="Scroll down">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M12 5v14M5 12l7 7 7-7"/></svg>
        </a>
    </section>

    <!-- Section 2: Company -->
    <section id="company" class="demo-section demo-section-dark">
        <div class="demo-content reveal">
            <p class="demo-eyebrow">Your Company</p>
            <h2 class="demo-headline">{{ company.name }}</h2>
            <p class="demo-body">A LegalTech SaaS business you've built over 6 years. Team of 85, revenue of $53m last year.</p>
            <p class="demo-body">You have ambitious plans. But lately, something feels off.</p>
        </div>
        <a href="#strategy" class="demo-scroll-cue" aria-label="Scroll down">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M12 5v14M5 12l7 7 7-7"/></svg>
        </a>
    </section>

    <!-- Section 3: Strategy -->
    <section id="strategy" class="demo-section">
        <div class="demo-content reveal">
            <p class="demo-eyebrow">Your Goal</p>
            <div class="demo-metrics">
                <div class="demo-metric">
                    <span class="demo-metric-value">{{ company.current_arr }}</span>
                    <span class="demo-metric-label">this year</span>
                </div>
                <span class="demo-metric-arrow">&rarr;</span>
                <div class="demo-metric">
                    <span class="demo-metric-value">{{ company.target_arr }}</span>
                    <span class="demo-metric-label">by {{ target_year }}</span>
                </div>
            </div>

            <div class="demo-strategy-banner">
                <div class="strategy-label">3AM Strategy* Statement</div>
                <p class="strategy-statement">{{ company.strategy }}</p>
                <p class="strategy-footnote">*3AM Strategy: The succinct and consistent way that each member of your team would describe your strategy when woken at 3am (without reaching for a slide deck). <a href="https://www.connecteddale.com/releases/The_3am_Test.html" target="_blank" rel="noopener">Learn more</a></p>
            </div>

            </div>
        <a href="#question" class="demo-scroll-cue" aria-label="Scroll down">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M12 5v14M5 12l7 7 7-7"/></svg>
        </a>
    </section>

    <!-- Section 4: The Question -->
    <section id="question" class="demo-section demo-section-dark">
        <div class="demo-content reveal">
            <h2 class="demo-headline">Your strategy is clear.</h2>
            <p class="demo-body">But are you going as fast as you should?</p>
        </div>
        <a href="#process" class="demo-scroll-cue" aria-label="Scroll down">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M12 5v14M5 12l7 7 7-7"/></svg>
        </a>
    </section>

    <!-- Section 5: Snapshot Intro -->
    <section id="process" class="demo-section">
        <div class="demo-content reveal">
            <p class="demo-eyebrow">The Process</p>
            <h2 class="demo-headline">The 55 plus Snapshot™</h2>
            <p class="demo-body">Snapshot™ is a unique team process that bypasses people's internal editor and reveals what they actually think, not what they think they should say.</p>
            <p class="demo-body">The 55 starts with Snapshot</p>
        </div>
        <a href="#team" class="demo-scroll-cue" aria-label="Scroll down">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M12 5v14M5 12l7 7 7-7"/></svg>
        </a>
    </section>

    <!-- Section 5: Team -->
    <section id="team" class="demo-section demo-section-dark">
        <div class="demo-content reveal">
            <p class="demo-eyebrow">Your ClearBrief Inc. Leadership Team</p>
            <h2 class="demo-headline">They've completed Snapshot</h2>

            <div class="demo-team-grid">
                {% for member in team_members %}
                <div class="demo-team-member">
                    <div class="demo-team-photo">
                        <img src="{{ member.photo }}" alt="{{ member.name }}">
                    </div>
                    <div class="demo-team-name">{{ member.name }}</div>
                    <div class="demo-team-role">{{ member.role }}</div>
                    <div class="demo-team-bio">{{ member.bio }}</div>
                </div>
                {% endfor %}
            </div>

            <p class="demo-body">Now it's your turn to add your signal alongside theirs.</p>

            <a href="/demo/signal?seed={{ seed }}" class="demo-cta">
                Add Your Signal
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3" />
                </svg>
            </a>
        </div>
    </section>
</main>

<script>
(function() {
    // Clear demo sessionStorage when starting a new demo
    // This ensures each demo run is fresh
    const DEMO_STATE_KEY = 'the55-demo-response';
    const SYNTHESIS_CACHE_KEY = 'the55-demo-synthesis';

    // Clear on page load to ensure fresh start
    sessionStorage.removeItem(DEMO_STATE_KEY);
    sessionStorage.removeItem(SYNTHESIS_CACHE_KEY);
    console.log('Demo sessionStorage cleared for fresh start');

    // Reveal animation
    const reveals = document.querySelectorAll('.reveal');
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('revealed');
                observer.unobserve(entry.target);
            }
        });
    }, { threshold: 0.15, rootMargin: '0px 0px -60px 0px' });
    reveals.forEach(el => observer.observe(el));
})();
</script>
{% endblock %}
