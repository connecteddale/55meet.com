<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta name="theme-color" content="#2563eb">
    <title>{% block title %}The 55{% endblock %}</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet" href="/static/css/main.css">
    <link rel="stylesheet" href="/static/css/transitions.css">
    {% block head %}{% endblock %}
</head>
<body{% block body_class %}{% endblock %}>
    <a href="#main-content" class="skip-link">Skip to main content</a>
    {% block header %}
    <header>
        <div class="container">
            <h1><a href="/">The 55</a></h1>
            {% block nav %}{% endblock %}
        </div>
    </header>
    {% endblock %}

    <main id="main-content">
        <div class="container">
            {% block content %}{% endblock %}
        </div>
    </main>

    {% block footer %}{% endblock %}

    <!-- Image Lightbox Modal -->
    <div id="image-lightbox" class="lightbox" aria-hidden="true">
        <div class="lightbox-backdrop"></div>
        <div class="lightbox-content">
            <img src="" alt="Zoomed image">
        </div>
    </div>

    <script>
    // Image lightbox functionality
    (function() {
        const lightbox = document.getElementById('image-lightbox');
        if (!lightbox) return;

        const lightboxImg = lightbox.querySelector('img');
        const backdrop = lightbox.querySelector('.lightbox-backdrop');

        function openLightbox(src, alt) {
            lightboxImg.src = src;
            lightboxImg.alt = alt || 'Zoomed image';
            lightbox.classList.add('active');
            lightbox.setAttribute('aria-hidden', 'false');
            document.body.style.overflow = 'hidden';
        }

        function closeLightbox() {
            lightbox.classList.remove('active');
            lightbox.setAttribute('aria-hidden', 'true');
            document.body.style.overflow = '';
        }

        // Close on backdrop click
        backdrop.addEventListener('click', closeLightbox);

        // Close on image click
        lightboxImg.addEventListener('click', closeLightbox);

        // Close on escape key
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape' && lightbox.classList.contains('active')) {
                closeLightbox();
            }
        });

        // Attach click handlers to zoomable images
        document.addEventListener('click', function(e) {
            const img = e.target.closest('img.zoomable, .zoomable img');
            if (img) {
                e.preventDefault();
                openLightbox(img.src, img.alt);
            }
        });
    })();
    </script>

    {% block scripts %}{% endblock %}
</body>
</html>
